<?xml version="1.0" encoding="UTF-8"?>
<templateSet group="Magic Script">
    <template name="func" value="function $NAME$($PARAMS$) {&#10;    $END$&#10;}" description="Function declaration" toReformat="true" toShortenFQNames="true">
        <variable name="NAME" expression="" defaultValue="&quot;functionName&quot;" alwaysStopAt="true" />
        <variable name="PARAMS" expression="" defaultValue="&quot;&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <template name="var" value="var $NAME$ = $VALUE$;" description="Variable declaration" toReformat="true" toShortenFQNames="true">
        <variable name="NAME" expression="" defaultValue="&quot;variableName&quot;" alwaysStopAt="true" />
        <variable name="VALUE" expression="" defaultValue="&quot;null&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <template name="if" value="if ($CONDITION$) {&#10;    $END$&#10;}" description="If statement" toReformat="true" toShortenFQNames="true">
        <variable name="CONDITION" expression="" defaultValue="&quot;true&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <template name="ifelse" value="if ($CONDITION$) {&#10;    $THEN$&#10;} else {&#10;    $END$&#10;}" description="If-else statement" toReformat="true" toShortenFQNames="true">
        <variable name="CONDITION" expression="" defaultValue="&quot;true&quot;" alwaysStopAt="true" />
        <variable name="THEN" expression="" defaultValue="&quot;&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <template name="for" value="for (var $VAR$ = 0; $VAR$ &lt; $LIMIT$; $VAR$++) {&#10;    $END$&#10;}" description="For loop" toReformat="true" toShortenFQNames="true">
        <variable name="VAR" expression="" defaultValue="&quot;i&quot;" alwaysStopAt="true" />
        <variable name="LIMIT" expression="" defaultValue="&quot;10&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <template name="while" value="while ($CONDITION$) {&#10;    $END$&#10;}" description="While loop" toReformat="true" toShortenFQNames="true">
        <variable name="CONDITION" expression="" defaultValue="&quot;true&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <template name="try" value="try {&#10;    $TRY$&#10;} catch ($EXCEPTION$) {&#10;    $END$&#10;}" description="Try-catch statement" toReformat="true" toShortenFQNames="true">
        <variable name="TRY" expression="" defaultValue="&quot;&quot;" alwaysStopAt="true" />
        <variable name="EXCEPTION" expression="" defaultValue="&quot;e&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <!-- Database templates -->
    <template name="dbselect" value="var result = db.select('$SQL$', $PARAMS$);" description="Database select" toReformat="true" toShortenFQNames="true">
        <variable name="SQL" expression="" defaultValue="&quot;SELECT * FROM table&quot;" alwaysStopAt="true" />
        <variable name="PARAMS" expression="" defaultValue="&quot;{}}&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <template name="dbinsert" value="var result = db.insert('$SQL$', $PARAMS$);" description="Database insert" toReformat="true" toShortenFQNames="true">
        <variable name="SQL" expression="" defaultValue="&quot;INSERT INTO table VALUES&quot;" alwaysStopAt="true" />
        <variable name="PARAMS" expression="" defaultValue="&quot;{}&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <template name="dbupdate" value="var result = db.update('$SQL$', $PARAMS$);" description="Database update" toReformat="true" toShortenFQNames="true">
        <variable name="SQL" expression="" defaultValue="&quot;UPDATE table SET&quot;" alwaysStopAt="true" />
        <variable name="PARAMS" expression="" defaultValue="&quot;{}&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <!-- HTTP templates -->
    <template name="httpget" value="var response = http.get('$URL$', $PARAMS$);" description="HTTP GET request" toReformat="true" toShortenFQNames="true">
        <variable name="URL" expression="" defaultValue="&quot;https://api.example.com&quot;" alwaysStopAt="true" />
        <variable name="PARAMS" expression="" defaultValue="&quot;{}&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <template name="httppost" value="var response = http.post('$URL$', $BODY$);" description="HTTP POST request" toReformat="true" toShortenFQNames="true">
        <variable name="URL" expression="" defaultValue="&quot;https://api.example.com&quot;" alwaysStopAt="true" />
        <variable name="BODY" expression="" defaultValue="&quot;{}&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <!-- Return templates -->
    <template name="returnjson" value="return response.json($DATA$);" description="Return JSON response" toReformat="true" toShortenFQNames="true">
        <variable name="DATA" expression="" defaultValue="&quot;{}&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
    
    <template name="returntext" value="return response.text('$TEXT$');" description="Return text response" toReformat="true" toShortenFQNames="true">
        <variable name="TEXT" expression="" defaultValue="&quot;Hello World&quot;" alwaysStopAt="true" />
        <context>
            <option name="MAGIC_SCRIPT" value="true" />
        </context>
    </template>
</templateSet>